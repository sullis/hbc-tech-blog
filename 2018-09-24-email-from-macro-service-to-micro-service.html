<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title> Email: from macro-service to micro-service </title>

        <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Email: from macro-service to micro-service | HBC Tech</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Email: from macro-service to micro-service" />
<meta name="author" content="Kinshuk Varshney" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this blog, I share the migration of email system from CNS v1 to v2 and detail architecture of CNS v2." />
<meta property="og:description" content="In this blog, I share the migration of email system from CNS v1 to v2 and detail architecture of CNS v2." />
<link rel="canonical" href="https://tech.hbc.com/2018-09-24-email-from-macro-service-to-micro-service.html" />
<meta property="og:url" content="https://tech.hbc.com/2018-09-24-email-from-macro-service-to-micro-service.html" />
<meta property="og:site_name" content="HBC Tech" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-09-24T00:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta name="twitter:creator" content="@Kinshuk Varshney" />
<script type="application/ld+json">
{"description":"In this blog, I share the migration of email system from CNS v1 to v2 and detail architecture of CNS v2.","author":{"@type":"Person","name":"Kinshuk Varshney"},"@type":"BlogPosting","url":"https://tech.hbc.com/2018-09-24-email-from-macro-service-to-micro-service.html","headline":"Email: from macro-service to micro-service","dateModified":"2018-09-24T00:00:00-05:00","datePublished":"2018-09-24T00:00:00-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://tech.hbc.com/2018-09-24-email-from-macro-service-to-micro-service.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

        <meta property="og:title" content="Email: from macro-service to micro-service" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://tech.hbc.com//2018-09-24-email-from-macro-service-to-micro-service.html" />
<meta property="og:description" content="Email Engineering recently migrated all transactional emails to CNS v2. This was a slow migration as CNS v1, although, referred to as a micro service was any..." />
<meta property="og:image" content="https://tech.hbc.com/assets/images/blog/hbc-tech-logo-tipi.jpg" />
<meta property="og:image:secure_url" content="https://tech.hbc.com/assets/images/cns-v2/the_phoenix_rises.jpg" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:alt" content="cns-v2/the_phoenix_rises.jpg" />


        <link rel="stylesheet" href="https://tech.hbc.com/assets/css/main.css">
        <link rel="canonical" href="https://tech.hbc.com/2018-09-24-email-from-macro-service-to-micro-service.html">
        <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,700" rel="stylesheet">

        <!-- Icons -->
        <!-- 16x16 -->
        <link rel="shortcut icon" href="https://tech.hbc.com/assets/images/favicon.ico">
    </head>

    <body aria-label="Content">
        <header id="site-header" class="site-header">
    <div class="site-header__inner">
    	<a class="site-header__logo" href="/">
        	<svg class="hbc-tech-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 52">
        		<use class="hbc-tech-logo__text" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#hbc-tech-logo"></use>
            </svg>
    	</a>
        <nav id="menu" class="navigation">
    <svg class="navigation__menu-icon" xmlns="http://www.w3.org/2000/svg">
        <path class="bar bar__top" d="M0,3 L30,3" />
        <path class="bar bar__cross-1" d="M0,14 L30,14" />
        <path class="bar bar__cross-2" d="M0,14 L30,14" />
        <path class="bar bar__bottom" d="M0,25 L30,25" />
    </svg>
	<menu class="menu">
		<ul class="link-list">
		
        
            <li class="link-list__link-item">
                <a href="https://tech.hbc.com/" class="link-list__link
            
            ">
                <span class="link-list__link-highlight">Insights</span></a>
            </li>
        
            <li class="link-list__link-item">
                <a href="https://tech.hbc.com/code" class="link-list__link
            
            ">
                <span class="link-list__link-highlight">Code</span></a>
            </li>
        
            <li class="link-list__link-item">
                <a href="https://tech.hbc.com/about" class="link-list__link
            
            ">
                <span class="link-list__link-highlight">About</span></a>
            </li>
        
            <li class="link-list__link-item">
                <a href="https://tech.hbc.com/work-here" class="link-list__link
            
            ">
                <span class="link-list__link-highlight">Work Here</span></a>
            </li>
        
	    </ul>
	</menu>
</nav>

        <search id="header-search" class="header-search">
	<form class="header-search__form" action>
	  <input type="text" class="header-search__input" id="header-search-input" placeholder=" Search" name="query">
	</form>
  	<svg id="header-search__toggle" class="header-search__svg" xmlns="http://www.w3.org/2000/svg" >
		<path id="leftSearch" class="path path--left-half" d="M11.4842576,23.9891168 C5.09608476,23.7189967 0,18.4546255 0,12 C0,5.54951437 4.85419801,0.113423154 12.4763811,0.0114091479"/>
		<path id="rightSearch" class="path path--right-half" d="M12.5376167,0.0118279089 C18.9155446,0.293025077 24,5.55274344 24,12 C24,18.4701834 17.7604297,24.3112218 11.1896721,23.9909829"/>
		<path id="handle" class="path path--handle" d="M20.7485408,20.8914207 L26.8571202,27 L20.7485408,20.8914207"/>
    </svg>
    <section class="header-search__results" id="header-search__results"></section>
</search>

    </div>
</header>

        <section class="content"><article class="article">
    <header class="article__header article__header--reveal">
        <h1 class="header-title" title="Email: from macro-service to micro-service">Email: from macro-service to micro-service</h1>
        
        
        <img class="hero-image" title="Email: from macro-service to micro-service" src="https://tech.hbc.com/assets/images/cns-v2/the_phoenix_rises.jpg" />
        
        

        
            
        <div class="article-meta">
            
            <a href="https://tech.hbc.com/category/back-end" class="article-meta__category">back end</a>
            
        
        
        
            <span class="slug-divider"></span>
            <span class="article-meta__author">
            
                
                <!-- if author exists in site.authors, create link to author's page -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- render the author name regardless if they're a featured author -->Kinshuk Varshney<!-- if author exists in site.authors, close link to author's page -->
                <!-- add author's job title to give article more clout -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            </span>
            <span class="slug-divider"></span>
        
    
            <span class="article-meta__date">
                SEP 24, 2018
            </span>
        </div>
    </header>
    <section class="article__content article__content--reveal">
        
        <div class="article__content__read-time"><span class="read-time" title="Estimated read time">
  
  
    <span class="read-time__text-1">6 min</span>
    <span class="read-time__text-2">Read</span>
    <span class="read-time__text-3">Time</span>
  
</span>
</div>
        <div class="article__content__share-buttons"><ul class="share-buttons">
    <li class="share-buttons__link-item">
        <a href="https://twitter.com/intent/tweet?text=https://tech.hbc.com//2018-09-24-email-from-macro-service-to-micro-service.html" class="share-buttons__link" title="Share on Twitter" target="_blank">
            <svg class="hbc-svg-icon" height="36" width="36" xmlns="http://www.w3.org/2000/svg">
                <use class="hbc-svg-icon--twitter" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#twitter"></use>
            </svg>
        </a>
    </li>
    <li class="share-buttons__link-item">
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://tech.hbc.com/&source=/2018-09-24-email-from-macro-service-to-micro-service.html&title=Email: from macro-service to micro-service" class="share-buttons__link" title="Share on Linkedin" target="_blank">
            <svg height="36" width="36" xmlns="http://www.w3.org/2000/svg">
                <use class="hbc-svg-icon" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#linkedin" ></use>
            </svg>
        </a>
    </li>
    <li class="share-buttons__link-item">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://tech.hbc.com//2018-09-24-email-from-macro-service-to-micro-service.html" class="share-buttons__link" title="Share on Facebook" target="_blank">
            <svg height="36" width="36" xmlns="http://www.w3.org/2000/svg">
                <use class="hbc-svg-icon" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#facebook" ></use>
            </svg>
        </a>
    </li>
    <li class="share-buttons__link-item">
        <a href="https://www.reddit.com/submit?url=https://tech.hbc.com//2018-09-24-email-from-macro-service-to-micro-service.html" class="share-buttons__link" title="Share on Reddit" target="_blank">
            <svg height="36" width="36" xmlns="http://www.w3.org/2000/svg">
                <use class="hbc-svg-icon" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#reddit" ></use>
            </svg>
        </a>
    </li>
</ul>
</div>
        <div class="article__content__body"><p>Email Engineering recently migrated all transactional emails to CNS v2. This was a slow migration as CNS v1, although, referred to as a micro service was anything but one! We inherited CNS v1 towards the end of last year and started migration to CNS v2 in the beginning of this year. In doing so, we followed what could be labeled as a flavor of <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/strangler">Strangler pattern</a>. In this blog, I will share how we accomplished this task and also provide a detailed view of the new CNS (CNS v2).</p>

<h1 id="cns">CNS</h1>
<p>HBC Customer Notification Service (CNS) processes and sends transactional emails for Saks, Saks Off 5th and Lord and Taylor banners. CNS consumes events from Order Management System (OMS), renders the event payload into emails and sends them via CheetahMail. CNS also sends SMS notifications via Vibes SMS for applicable events and users. With CNS v2 and consequently the breakdown of v1 monolith into true micro services, the acronym CNS now stands for Customer Notification “System”.</p>

<h1 id="cns-v2">CNS v2</h1>
<p>CNS v2 is developed for the Cloud and is 100% hosted on AWS. It breaks down the v1 monolith into three micro services, namely- <code class="highlighter-rouge">svc-mq-consumer</code>, <code class="highlighter-rouge">api-customer-notification</code> and <code class="highlighter-rouge">lib-email-render</code>. The v2 architecture and the three new components are explained below.</p>

<h2 id="architecture">Architecture</h2>
<p><img src="./assets/images/cns-v2/cns-v2-arch-diagram.png" alt="alt text" /></p>
<h3 id="svc-mq-consumer">Svc-mq-consumer</h3>
<p>This component is an IBM MQ message handler/consumer. After polling for messages from the queue, it <code class="highlighter-rouge">POSTs</code> the message payload to the api-customer-notification’s <code class="highlighter-rouge">/send_email</code> endpoint.</p>

<h3 id="api-customer-notification">Api-customer-notification</h3>
<p>This component, written as a Lambda function, exposes the CNS API. After receiving a <code class="highlighter-rouge">/send_email</code> request from the consumer, the api invokes the <code class="highlighter-rouge">lib-email-render</code> Lambda function for rendering it into HTML. On receiving the HTML response, the api’s thin Email Gateway wrapper sends the HTML payload with relevant data to CheetahMail. The api stores both the message payload received from the consumer and the final rendered email HTML in Aurora MySql DB. It also exposes this data as a powerful dashboard for troubleshooting and QA testing. As the dashboard is exposed to all HBC and is used by multiple teams, it is gaining popularity and traffic and now merits to exist on its own as a <code class="highlighter-rouge">web</code> component in the coming days.</p>

<h3 id="lib-email-render">Lib-email-render</h3>
<p>The lib Lambda function holds all the business logic needed to render an email HTML from an event message. Most of the business logic from CNS v1 is migrated to this component.</p>

<h1 id="strangling-cns-v1">Strangling CNS v1</h1>
<h2 id="phase-1---using-cns-v1-as-message-consumer-and-repeater">Phase 1 - Using CNS v1 As Message Consumer and Repeater</h2>
<p>Once CNS v2 started taking shape, the team discussed steps to phase out CNS v1. First, we decided that this should be a banner by banner transition. This would help in streamlining the team’s efforts and also prevent business impact across banners if something were to break. Next, we agreed on using CNS v1 as simply a message consumer, which would receive the message off the IBM MQ queue and send the payload to CNS v2’s <code class="highlighter-rouge">api-customer-notification</code> component. This meant that our two core components (api and lib) were in play and the team could focus its efforts on developing and testing those.</p>

<p>We launched both Saks and Lord and Taylor on CNS v2 in Production with this setup on Apr 5.</p>

<h2 id="phase-2---using-svc-mq-consumer-as-message-consumer-for-o5">Phase 2 - Using <code class="highlighter-rouge">svc-mq-consumer</code> As Message Consumer for O5</h2>
<p>Once Saks and Lord and Taylor were on CNS v2 (using CNS v1 as message consumer), we focused our attention to migrate Saks Off 5th to CNS v2.
By now, the two new CNS v2 components (api and lib) were stable in Production (for Saks and Lord and Taylor). We took some time to enhance CloudWatch logging and metrics for both these new components. We also enhanced the api dashboard in this time to facilitate troubleshooting and added features such as email preview and resend.</p>

<p>At this time, the team felt confident to undertake a full migration for Saks Off 5th, including replacing CNS v1 with our brand new <code class="highlighter-rouge">svc-mq-consumer</code> component. Since CNS v1 was not used in this flow, we had to shut down CNS v1 completely for Saks Off 5th. This was essential as the underlying infrastructure- the queues, OMS - were common to both CNS v1 and v2 and having v1 linger around could lead to unexpected results.</p>

<p>O5 migrated completely on CNS v2 in Production on Aug 14.</p>

<h2 id="phase-3---shutting-down-cns-v1-and-clean-up">Phase 3 - Shutting Down CNS v1 and Clean up</h2>
<p>By now, all three CNS v2 components were taking live Production traffic.The team took some time to put CW logging and metrics in the consumer component. Finally, we decided it was time to shut down CNS v1 for good. Time to draw the curtains, roll the credits! It was great knowing you, CNS v1!</p>

<p>Three teams- Engineering, QA and Infra, joined forces to co-ordinate this effort. It was crucial that old CNS v1 Docker instances were removed, new CNS v2 components were enabled and their connectivity with queues etc. were established and verified. Also, the end to end flow from order placement on website to receiving emails was to be verified. The Go pipelines that were used to build and deploy code for CNS v1 were to be paused and subsequently disabled (so that no one is able to resurrect CNS v1 even by mistake). Finally, the <code class="highlighter-rouge">nagios</code> alerts for CNS v1 were disabled and its Mongo DB servers decommissioned.</p>

<p>CNS v1 was shut down for all banners on Sep 6.</p>

<h1 id="cns-v2-ci-and-cd">CNS v2 CI and CD</h1>
<p>CNS v2 follows Continuous Integration (CI) and is set up for Continuous Delivery (CD), but the latter is currently disabled. Two pieces need to be in place for us to push code to Production with a high degree of confidence- A reliable infrastructure, with high availability and scalability, and a development workflow with adequate checks and measures that guarantees only high quality, bug free code reaches Production. While hosting all of CNS v2 in AWS takes care of the robust infrastructure piece, it is the development workflow that the team is working to continuously improve.</p>

<p>When we inherited CNS v1, the unit tests’ code coverage was barely 40%. Today, CNS v2 has close to 75% code coverage (and is increasing every day). The CloudWatch (CW) alerts are set up by banner and by email type and are integrated with PagerDuty. We are in the process of improving our metrics in CW so that if incidents happen, we are able to quantify their impact with precision. We are also integrating our Lambda deployments with New Relic so as to provide greater visibility to SRE and Ops teams. CW Logging is already in place for all components. We feel that we are almost there and should be able to enable CD in the next couple of weeks.</p>

<h1 id="final-thoughts">Final Thoughts</h1>
<p>While we are forever in debt of the old CNS, the new CNS opens up a world of possibilities. All transactional emails across all banners are getting a fresh, modern look as I write this, made possible with new found powers of CNS v2. Bay emails migration to CNS follows soon. Business (Marketing) loves the new CNS and they feel emboldened to try out new features and products in the coming days and months. The team has a spring in its stride and has so much to look forward to. Happy days lie ahead filled with all good things!</p>
</div>
        <footer class="article__content__footer">
            
<div class="article-tags">

    <span class="article-tags__tag">cns</span><span>,</span>
    

    <span class="article-tags__tag">aws</span><span>,</span>
    

    <span class="article-tags__tag">lambda</span><span>,</span>
    

    <span class="article-tags__tag">email</span><span>,</span>
    

    <span class="article-tags__tag">architecture</span><span>,</span>
    

    <span class="article-tags__tag">scala</span><span>,</span>
    

    <span class="article-tags__tag">microservices</span>

</div>


            <!-- author bio -->
<section class="author-bio">


	

	
	<!-- author is a guest contributor -->
	<svg class="author-bio__avatar" height="36" width="36" xmlns="http://www.w3.org/2000/svg">
        <use class="hbc-svg-icon hbc-svg-icon--avatar__circle" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#circle" ></use>
        <use class="hbc-svg-icon hbc-svg-icon--avatar__head" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#head" ></use>
        <use class="hbc-svg-icon hbc-svg-icon--avatar__body" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#body" ></use>
    </svg>
	<span class="author-bio__name">Kinshuk Varshney</span>
	


</section>

        </footer>
    </section>
    <aside class="recirc">
    <h2 class="header__title">Recent Insights</h2><span class="slug-divider"></span>
    <a class="header__view-all-link" href="https://tech.hbc.com/categories/index.html">See All</a>
    <div class="recirc__articles">
    
    
    
    
    
    

    
        
    
        
            
        <article class="recirc__articles__item">
            


<section class="snippet">

    
    <h1 class="snippet__title">
    <a href="https://tech.hbc.com/2018-04-02-brand-alerts-v2-breaking-down-a-monolith-with-aws.html" class="snippet__title__link" title="Brand Alerts V2: Breaking Down a Monolith with AWS">
        Brand Alerts V2: Breaking Down a Monolith with AWS
    </a>
    </h1>
    <div class="snippet__meta">
    
        
        
        
            

            
                <a class="meta__category-link" href="https://tech.hbc.com/category/back-end">back end</a>
            

            <span class="slug-divider"></span>
        
    

    
        
            <span class="meta__author">
            
                
                <!-- if author exists in site.authors, create link to author's page -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- render the author name regardless if they're a featured author -->Kinshuk Varshney<!-- if author exists in site.authors, close link to author's page -->
                <!-- add author's job title to give article more clout -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            </span>
            <span class="slug-divider"></span>
        
    
    
        <span class="meta__date">APR 2, 2018</span>
    
    </div>
    
        <a href="https://tech.hbc.com/2018-04-02-brand-alerts-v2-breaking-down-a-monolith-with-aws.html" class="snippet__excerpt__link" title="Brand Alerts V2: Breaking Down a Monolith with AWS">
            <p class="snippet__excerpt">
            Recently, team T-Rex worked on the re-architecture of the
Brand Alerts back end system, a project which we named Brand Alerts V2.
In this blog, I share our new architecture detailing some of the new AWS
powered components.


            </p>
        </a>
    
</section>

        </article>
        
    
        
    
        
            
        <article class="recirc__articles__item">
            


<section class="snippet">

    
    <h1 class="snippet__title">
    <a href="https://tech.hbc.com/2018-04-02-brand-alerts-v2-breaking-down-a-monolith-with-aws.html" class="snippet__title__link" title="Brand Alerts V2: Breaking Down a Monolith with AWS">
        Brand Alerts V2: Breaking Down a Monolith with AWS
    </a>
    </h1>
    <div class="snippet__meta">
    
        
        
        
            

            
                <a class="meta__category-link" href="https://tech.hbc.com/category/back-end">back end</a>
            

            <span class="slug-divider"></span>
        
    

    
        
            <span class="meta__author">
            
                
                <!-- if author exists in site.authors, create link to author's page -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- render the author name regardless if they're a featured author -->Kinshuk Varshney<!-- if author exists in site.authors, close link to author's page -->
                <!-- add author's job title to give article more clout -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            </span>
            <span class="slug-divider"></span>
        
    
    
        <span class="meta__date">APR 2, 2018</span>
    
    </div>
    
        <a href="https://tech.hbc.com/2018-04-02-brand-alerts-v2-breaking-down-a-monolith-with-aws.html" class="snippet__excerpt__link" title="Brand Alerts V2: Breaking Down a Monolith with AWS">
            <p class="snippet__excerpt">
            Recently, team T-Rex worked on the re-architecture of the
Brand Alerts back end system, a project which we named Brand Alerts V2.
In this blog, I share our new architecture detailing some of the new AWS
powered components.


            </p>
        </a>
    
</section>

        </article>
        
    
        
            
        <article class="recirc__articles__item">
            


<section class="snippet">

    
    <h1 class="snippet__title">
    <a href="https://tech.hbc.com/2016-08-21-scala-fedex.html" class="snippet__title__link" title="New open source project: scala-fedex">
        New open source project: scala-fedex
    </a>
    </h1>
    <div class="snippet__meta">
    
        
        
        
            

            
                <a class="meta__category-link" href="https://tech.hbc.com/category/back-end">back end</a>
            

            <span class="slug-divider"></span>
        
    

    
        
            <span class="meta__author">
            
                
                <!-- if author exists in site.authors, create link to author's page -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- render the author name regardless if they're a featured author -->Ryan Caloras<!-- if author exists in site.authors, close link to author's page -->
                <!-- add author's job title to give article more clout -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            </span>
            <span class="slug-divider"></span>
        
    
    
        <span class="meta__date">AUG 21, 2016</span>
    
    </div>
    
        <a href="https://tech.hbc.com/2016-08-21-scala-fedex.html" class="snippet__excerpt__link" title="New open source project: scala-fedex">
            <p class="snippet__excerpt">
            
  
  



            </p>
        </a>
    
</section>

        </article>
        
    
        
            
        <article class="recirc__articles__item">
            


<section class="snippet">

    
    <h1 class="snippet__title">
    <a href="https://tech.hbc.com/2019-04-19-time-zones.html" class="snippet__title__link" title="How to Deal With Time Zones in Database and Distributed Systems">
        How to Deal With Time Zones in Database and Distributed Systems
    </a>
    </h1>
    <div class="snippet__meta">
    
        
        
        
            

            
                <a class="meta__category-link" href="https://tech.hbc.com/categories/#back-end">back-end</a>
            

            <span class="slug-divider"></span>
        
    

    
        
            <span class="meta__author">
            
                
                <!-- if author exists in site.authors, create link to author's page -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                <!-- render the author name regardless if they're a featured author -->Daniel Kirby<!-- if author exists in site.authors, close link to author's page -->
                <!-- add author's job title to give article more clout -->
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            
            </span>
            <span class="slug-divider"></span>
        
    
    
        <span class="meta__date">APR 19, 2019</span>
    
    </div>
    
        <a href="https://tech.hbc.com/2019-04-19-time-zones.html" class="snippet__excerpt__link" title="How to Deal With Time Zones in Database and Distributed Systems">
            <p class="snippet__excerpt">
            Time zones can be one of the hardest and most confusing sources of technical issues in modern software systems. In this article we’re going to go through some common rules of thumb for dealing with datetimes when architecting those systems.


            </p>
        </a>
    
</section>

        </article>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    </div>
</aside>

</article>

</section>
        <footer class="footer">
	<svg class="est1670" xmlns="http://www.w3.org/2000/svg">
		<use class="hbc-tech-logo__use" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#est1670" ></use>
	</svg>
    <section class="footer__links">
	<ul class="social-links social-links__list">
    <li class="social-links__list-item">
        <a class="social-links__link" target="_blank" rel="next" href="https://www.linkedin.com/company/hbc_digital/">
            <svg class="social-links__icon" xmlns="http://www.w3.org/2000/svg">
                <use class="linkedin"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#linkedin"></use>
            </svg>
        </a>
    </li>
    <li class="social-links__list-item">
        <a class="social-links__link" target="_blank" rel="next" href="https://twitter.com/hbctechteam/">
            <svg class="social-links__icon" xmlns="http://www.w3.org/2000/svg">
                <use class="twitter"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#twitter"></use>
            </svg>
        </a>
    </li>
    <li class="social-links__list-item">
        <a class="social-links__link" target="_blank" rel="next" href="https://www.instagram.com/hbcdigital">
            <svg class="social-links__icon" xmlns="http://www.w3.org/2000/svg">
                <use class="instagram"  xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://tech.hbc.com/assets/images/hbc-icons.svg#instagram"></use>
            </svg>
        </a>
    </li>
</ul>

	<p class="copyright">&copy; 2019 HBC Tech</i></p>
	</section>
</footer>

        <script type="text/javascript" src="https://tech.hbc.com/assets/js/vendor/scrollmagic/ScrollMagic.min.js"></script>
<script type="text/javascript" src="https://tech.hbc.com/assets/js/vendor/jekyll-search-js/fetch.js"></script>
<script type="text/javascript" src="https://tech.hbc.com/assets/js/vendor/jekyll-search-js/search.js"></script>
<script type="text/javascript" src="https://tech.hbc.com/assets/js/main.js"></script>
<script type="text/javascript" src="https://tech.hbc.com/assets/js/vendor/snap/snap.svg-min.js"></script>
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-106560024-1', 'auto');
  ga('send', 'pageview');
</script>


<!-- for netlify cms login redirect -->
<script>
  if (window.netlifyIdentity) {
    window.netlifyIdentity.on("init", user => {
      if (!user) {
        window.netlifyIdentity.on("login", () => {
          document.location.href = "/admin/";
        });
      }
    });
  }
</script>

    </body>

</html>
